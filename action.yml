name: 'Keeper Commander Secrets Valut'
description: 'A GitHub Action to consume Secrets from Keeper'
inputs:

  keeper-secret-config:
    description: 'Keeper Commander config file'
    required: true
  
  server:
    description: 'Keeper server'
    required: false

  secrets:
    description: 'A list of secrets to retrieve from Keeper Vault'
    required: true

runs:
  using: "composite"
  steps:

    - run: python -m pip install actions-toolkit keepersecuritysm  # Installing dependencies
      shell: bash

    - name: Run Entry
      env:
        KEEPER_SERVER: ${{ inputs.keeper-server }}
        SECRET_CONFIG: ${{ inputs.keeper-secret-config }}
        SECRETS: ${{ inputs.secrets }}
      run: python ${{ github.action_path }}/entrypoint.py
      shell: bash

